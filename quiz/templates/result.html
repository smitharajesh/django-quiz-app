{% extends "base.html" %}
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-38578610-12"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'UA-38578610-12');
</script>
{% load i18n %}

{% load quiz_tags %}

{% block title %} {{ quiz.title}} {% endblock %}
{% block description %} {% trans "Exam Results for" %} {{ quiz.title }} {% endblock %}

{% block content %}

{% if max_score %}

<div>
  <h2>{% trans "Exam results" %}</h2>
  <p>
    <small class="muted">{% trans "Exam title" %}: </small>
    <strong>{{ quiz.title }}</strong>
  </p>

  <p class="lead">
    {% trans "You answered" %} {{ score }} {% trans "questions correctly out of" %}
    {{ max_score }}, {% trans "giving you" %} {{ percent }} {% trans "percent correct" %}
  </p>

  {% if quiz.pass_mark %}
  <hr>
  <p class="lead">{{ sitting.result_message }}</p>
  <hr>

  {% endif %}

  <p>{% trans "Review the questions below and try the exam again in the future "%}.</p>

  {% if user.is_authenticated %}

  <p>{% trans "The result of this exam will be stored in your progress section so you can review and monitor your progression" %}.</p>

  {% endif %}
</div>


{% endif %}

{% for question in questions %}
<h5>{{ forloop.counter }}. {{ question.content }} </h5>
{% correct_answer_for_all question %}

{% if question.user_answer %}
<p>{{ question.user_answer }}</p>
{% endif %}

<p><strong>{% trans "Explanation" %}:</strong></p>
<div class="text-info" style="display: flex; flex-direction: column;  width: fit-content; padding: 3px 15px; border-radius: 5px; align-items: center; justify-content: center;">
  <p>{{ question.explanation|safe }}</p>
</div>

{% if question.id %}
{% with exams.last.incorrect_questions|split:',' as wrongLists %}
     {% if question.id in wrongLists  %}
         <p>Your answer is <strong class="text-danger">In-Correct</strong></p>    
    {% else %}
         <p>Your answer is <strong class="text-success">Correct</strong></p>    
     {% endif %}
 {% endwith %}
 {% endif %}


<hr>

{% endfor %}

{% endblock %}